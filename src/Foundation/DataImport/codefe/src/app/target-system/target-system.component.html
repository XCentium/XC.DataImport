<div class="section" *ngIf="mapping">
    <div class="form-group">
        <h5 for="targettype">{{ 'TARGET_TYPE' | translate }}</h5>
        <select scDropdown class="form-control" id="targettype" [(ngModel)]="mapping.TargetType.Name" name="targettype" *ngIf="mapping.TargetType">
            <option class="dropdown-item" *ngFor="let target of targetTypes" scDropdownItem [ngValue]="target.Name">{{target.Name}}</option>                        
        </select>
    </div>
    <div class="targetDataTarget" *ngFor="let target of targetTypes">
        <div *ngIf="mapping.TargetType && mapping.TargetType.Name===target.Name">
            <h5>{{ target.Name | translate }}</h5>
            <div *ngFor="let field of target.Fields">
                <div *ngIf="field.InputType === 'text'">
                    <div class="form-group">
                        <label for="{{field.Name}}">{{ field.Name | translate }}</label>
                        <input type="text"  class="form-control" id="{{field.Name}}" name="{{field.Name}}" [(ngModel)]="mapping.Target[field.Name]" />
                    </div>
                </div>
                <div *ngIf="field.InputType === 'select'">
                    <div class="form-group">
                        <label for="{{field.Name}}">{{ field.Name | translate }}</label>
                        <select class="form-control" id="{{field.Name}}" [(ngModel)]="mapping.Target[field.Name]" name="{{field.Name}}" (change)="triggerFields(field.TriggerFields)">
                            <option scDropdownItem *ngFor="let option of targetOptionsDic[field.OptionsSource]" [ngValue]="option.Value" >{{option.Name}}</option>
                        </select>
                    </div>
                </div>
                <div *ngIf="field.InputType === 'textarea'">
                    <div class="form-group">
                        <label for="{{field.Name}}">{{ field.Name | translate }}</label>
                        <textarea class="form-control" id="{{field.Name}}" rows="4" [(ngModel)]="mapping.Target[field.Name]" name="{{field.Name}}"></textarea>
                    </div>
                </div>
                <div class="form-group tree-wrap" *ngIf="field.InputType === 'tree'">
                    <label for="{{field.Name}}">{{ field.Name | translate }}</label>
                    <tree-root [nodes]="targetOptionsDic[field.OptionsSource]" [options]="sitecoreTreeOptions" [(state)]="sitecoreTreeState" (activate)="onActivate($event)" 
                    #treeTarget (stateChange)="setState($event)">
                        <ng-template #treeNodeTemplate let-node let-index="index">
                            <span><img width="16" src="{{node.data.mediaUrl}}" class="tree-icon" />{{ node.data.name }}</span>
                        </ng-template>
                    </tree-root>
                </div>                             
            </div>
        </div>
    </div>
</div>
